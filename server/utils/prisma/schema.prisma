datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model users {
    id       Int      @id @default(autoincrement())
    level    Int      @default(0)
    username String
    password String
    mentor  mentors?
    mentee  mentees?
}

model mentors {
    id           Int         @id @default(autoincrement())
    user         users       @relation(references: [id], fields: [user_id])
    user_id      Int         @unique
    mentees      mentees[]
    department   department? @relation(fields: [departmentId], references: [id])
    departmentId Int?
    meetings     meetings[]
}

model mentees {
    id            Int        @id @default(autoincrement())
    user          users      @relation(references: [id], fields: [user_id])
    user_id       Int        @unique
    regno         String     @unique
    name          String
    year          Int
    section       String
    batch         String
    department    department @relation(references: [id], fields: [department_id])
    mentor_id     Int?
    mentor        mentors?   @relation(references: [user_id], fields: [mentor_id])
    meetings      meetings[]
    department_id Int
}

model meetings {
    id         Int      @id @default(autoincrement())
    date       DateTime
    discussion String
    mentee     mentees  @relation(references: [regno], fields: [mentee_id])
    mentee_id  String
    mentor     mentors  @relation(references: [user_id], fields: [mentor_id])
    mentor_id  Int
}

model department {
    name     String
    id       Int       @id @default(autoincrement())
    faculty  mentors[]
    students mentees[]
}
